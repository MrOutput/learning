SECTION .DATA
NO_ARGS:	DB	"no args.", 10, 0

SECTION .TEXT
GLOBAL _start

_start:		MOV	RCX,	QWORD [RSP]	;ARGC
		CMP	RCX,	2
		JL	EXIT.NO_ARGS

		XOR	RDI,	RDI

EXIT:		MOV	RAX,	60
		SYSCALL

.NO_ARGS:	MOV	RSI,	NO_ARGS
		CALL	STRLEN

		MOV	RSI,	NO_ARGS
		MOV	RDX,	RAX
		CALL	PRINT

		MOV	RDI,	1
		JMP	EXIT

;RSI,	BUF
;RDX,	BUFSIZE
PRINT:		MOV	RAX,	1
		MOV	RDI,	1
		SYSCALL
		RET

;RSI,	CHAR *
STRLEN:		XOR	RCX,	RCX
.LOOP:		MOV	AL,	BYTE [RSI + RCX]
		CMP	AL,	00H
		JE	.EXIT
		INC	RCX
		JMP	.LOOP
.EXIT:		MOV	RAX,	RCX
		RET
